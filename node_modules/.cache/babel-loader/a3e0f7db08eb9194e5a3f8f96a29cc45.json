{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SatoshiFlipper\\\\Desktop\\\\ineor-assignment\\\\src\\\\components\\\\BookAppointment.js\";\nimport React, { Component } from 'react';\nimport '../sass/bookappointment.scss';\nimport { TimePicker } from './TimePicker';\nexport class BookAppointment extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = event => {\n      this.setState({\n        price: event.target.value,\n        isDisabled: false\n      });\n    };\n\n    this.onChange = (field, e) => {\n      this.setState({\n        getWorkingHours: this.state.barbers.map(barber => barber.workHours)\n      });\n      let fields = this.state.fields;\n      fields['barber'] = e.target.value;\n      this.setState({\n        fields\n      });\n    };\n\n    this.state = {\n      fields: {},\n      errors: {},\n      barbers: [],\n      services: [],\n      startDate: new Date(),\n      price: \"Service Price\",\n      isDisabled: true,\n      serviceDuration: 0,\n      getWorkingHours: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleValidation() {\n    let fields = this.state.fields;\n    let errors = {};\n    let formIsValid = true; //Name\n\n    if (!fields[\"name\"]) {\n      formIsValid = false;\n      errors[\"name\"] = \"Please enter your full name\";\n    }\n\n    if (typeof fields[\"name\"] !== \"undefined\") {\n      if (!fields[\"name\"].match(/^[a-zA-Z]+$/)) {\n        formIsValid = false;\n        errors[\"name\"] = \"Only letters\";\n      }\n    } //Email\n\n\n    if (!fields[\"email\"]) {\n      formIsValid = false;\n      errors[\"email\"] = \"Please enter your email\";\n    }\n\n    if (typeof fields[\"email\"] !== \"undefined\") {\n      let lastAtPos = fields[\"email\"].lastIndexOf('@');\n      let lastDotPos = fields[\"email\"].lastIndexOf('.');\n\n      if (!(lastAtPos < lastDotPos && lastAtPos > 0 && fields[\"email\"].indexOf('@@') == -1 && lastDotPos > 2 && fields[\"email\"].length - lastDotPos > 2)) {\n        formIsValid = false;\n        errors[\"email\"] = \"Please enter a valid email\";\n      }\n    } //Phone\n\n\n    if (!fields[\"phone\"]) {\n      formIsValid = false;\n      errors[\"phone\"] = \"Please enter phone number\";\n    } //Barber\n\n\n    if (!fields[\"barber\"]) {\n      formIsValid = false;\n      errors[\"barber\"] = \"Please select a barber\";\n    } //Service\n\n\n    if (!fields[\"service\"]) {\n      formIsValid = false;\n      errors[\"service\"] = \"Please select a service\";\n    } //Date\n\n\n    if (!fields[\"date\"]) {\n      formIsValid = false;\n      errors[\"date\"] = \"Please select a date\";\n    } //Time\n\n\n    if (!fields[\"time\"]) {\n      formIsValid = false;\n      errors[\"time\"] = \"Please select a time\";\n    }\n\n    this.setState({\n      errors: errors\n    });\n    return formIsValid;\n  }\n\n  handleChange(field, e) {\n    let fields = this.state.fields;\n    fields[field] = e.target.value;\n    this.setState({\n      fields\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.handleValidation()) {\n      alert(\"Form submitted\");\n    } else {\n      alert(\"Form has errors.\");\n      console.log(this.state.fields);\n    }\n  }\n\n  componentDidMount() {\n    const baseUrl = 'http://localhost:3004'; // GET BARBERS\n\n    fetch(baseUrl + '/barbers').then(getBarbers => {\n      return getBarbers.json();\n    }).then(getBarbers => {\n      this.setState({\n        barbers: getBarbers\n      });\n    }).catch(err => {\n      alert(\"Failed to load our Barbers\" + err);\n    }); // GET SERVICES\n\n    fetch(baseUrl + '/services').then(getServices => {\n      return getServices.json();\n    }).then(getServices => {\n      this.setState({\n        services: getServices\n      });\n    }).catch(err => {\n      alert(\"Failed to load our Services\" + err);\n    });\n  }\n\n  render() {\n    const {\n      barbers,\n      services,\n      price\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"booking-app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"booking-app-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, \"Book your appointment\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"First Name\",\n      onChange: this.handleChange.bind(this, \"name\"),\n      value: this.state.fields[\"name\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, this.state.errors[\"name\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Last Name\",\n      onChange: this.handleChange.bind(this, \"surname\"),\n      value: this.state.fields[\"surname\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Email\",\n      onChange: this.handleChange.bind(this, \"email\"),\n      value: this.state.fields[\"email\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }, this.state.errors[\"email\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      pattern: \"[0][0-9]{8}\",\n      placeholder: \"Phone Number\",\n      onChange: this.handleChange.bind(this, \"phone\"),\n      value: this.state.fields[\"phone\"],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, this.state.errors[\"phone\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.fields[\"barber\"],\n      onChange: this.onChange.bind(this, \"barber\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      hidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 28\n      }\n    }, \"Select Barber\"), barbers.map(barber => /*#__PURE__*/React.createElement(\"option\", {\n      onClick: () => this.props.data.changeDuration(false),\n      key: barber.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 33\n      }\n    }, barber.firstName, \" \", barber.lastName))), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 24\n      }\n    }, this.state.errors[\"barber\"])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.fields[\"service\"],\n      onChange: this.handleClick.bind(this, \"service\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 24\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      hidden: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 28\n      }\n    }, \"Select Service\"), services.map(service => /*#__PURE__*/React.createElement(\"option\", {\n      key: service.id,\n      value: service.price,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, service.name))), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 24\n      }\n    }, this.state.errors[\"service\"])), /*#__PURE__*/React.createElement(TimePicker, {\n      field: this.state.fields,\n      getWorkingHours: this.state.getWorkingHours,\n      disabled: this.state.isDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-wrapper price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: price === 'Service Price' ? price : 'Price is ' + price + '$',\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Book appointment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\nexport default BookAppointment;","map":{"version":3,"sources":["C:/Users/SatoshiFlipper/Desktop/ineor-assignment/src/components/BookAppointment.js"],"names":["React","Component","TimePicker","BookAppointment","constructor","props","handleClick","event","setState","price","target","value","isDisabled","onChange","field","e","getWorkingHours","state","barbers","map","barber","workHours","fields","errors","services","startDate","Date","serviceDuration","handleChange","bind","handleSubmit","handleValidation","formIsValid","match","lastAtPos","lastIndexOf","lastDotPos","indexOf","length","preventDefault","alert","console","log","componentDidMount","baseUrl","fetch","then","getBarbers","json","catch","err","getServices","render","data","changeDuration","id","firstName","lastName","service","name"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport '../sass/bookappointment.scss';\r\nimport { TimePicker } from './TimePicker';\r\n\r\n\r\nexport class BookAppointment extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            fields: {},\r\n            errors: {},\r\n            barbers: [],\r\n            services: [],\r\n            startDate: new Date(),\r\n            price: \"Service Price\",\r\n            isDisabled: true,\r\n            serviceDuration: 0,\r\n            getWorkingHours: null,\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n    }\r\n\r\n    handleValidation(){\r\n        let fields = this.state.fields;\r\n        let errors = {};\r\n        let formIsValid = true;\r\n    \r\n        //Name\r\n        if(!fields[\"name\"]){\r\n          formIsValid = false;\r\n          errors[\"name\"] = \"Please enter your full name\";\r\n        }\r\n    \r\n        if(typeof fields[\"name\"] !== \"undefined\"){\r\n          if(!fields[\"name\"].match(/^[a-zA-Z]+$/)){\r\n            formIsValid = false;\r\n            errors[\"name\"] = \"Only letters\";\r\n          }      \t\r\n        }\r\n    \r\n        //Email\r\n        if(!fields[\"email\"]){\r\n          formIsValid = false;\r\n          errors[\"email\"] = \"Please enter your email\";\r\n        }\r\n    \r\n        if(typeof fields[\"email\"] !== \"undefined\"){\r\n          let lastAtPos = fields[\"email\"].lastIndexOf('@');\r\n          let lastDotPos = fields[\"email\"].lastIndexOf('.');\r\n    \r\n          if (!(lastAtPos < lastDotPos && lastAtPos > 0 && fields[\"email\"].indexOf('@@') == -1 && lastDotPos > 2 && (fields[\"email\"].length - lastDotPos) > 2)) {\r\n            formIsValid = false;\r\n            errors[\"email\"] = \"Please enter a valid email\";\r\n          }\r\n        }\r\n\r\n        //Phone\r\n        if(!fields[\"phone\"]){\r\n            formIsValid = false;\r\n            errors[\"phone\"] = \"Please enter phone number\";\r\n          }\r\n\r\n        //Barber\r\n        if(!fields[\"barber\"]){\r\n            formIsValid = false;\r\n            errors[\"barber\"] = \"Please select a barber\";\r\n        }\r\n\r\n        //Service\r\n        if(!fields[\"service\"]){\r\n            formIsValid = false;\r\n            errors[\"service\"] = \"Please select a service\";\r\n        }\r\n\r\n        //Date\r\n        if(!fields[\"date\"]){\r\n            formIsValid = false;\r\n            errors[\"date\"] = \"Please select a date\";\r\n        }\r\n\r\n        //Time\r\n        if(!fields[\"time\"]){\r\n            formIsValid = false;\r\n            errors[\"time\"] = \"Please select a time\";\r\n        }\r\n\r\n        this.setState({errors: errors});\r\n        return formIsValid;\r\n    }\r\n    \r\n    handleChange(field, e){    \t\t\r\n        let fields = this.state.fields;\r\n        fields[field] = e.target.value;        \r\n        this.setState({fields});\r\n    }\r\n    \r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        if(this.handleValidation()){\r\n            alert(\"Form submitted\");\r\n        }else{\r\n            alert(\"Form has errors.\")\r\n            console.log(this.state.fields)\r\n        }\r\n    }\r\n\r\n    handleClick = event => {\r\n        this.setState({\r\n            price: event.target.value,\r\n            isDisabled: false,\r\n        })\r\n    }\r\n\r\n    onChange = ( field, e) => {\r\n        this.setState({\r\n            getWorkingHours: this.state.barbers.map(barber => barber.workHours),\r\n        });\r\n\r\n        let fields = this.state.fields;\r\n        fields['barber'] = e.target.value;        \r\n        this.setState({fields});\r\n    }\r\n\r\n    componentDidMount() {\r\n        const baseUrl = 'http://localhost:3004';\r\n\r\n        // GET BARBERS\r\n\r\n        fetch(baseUrl + '/barbers')\r\n        .then(getBarbers => {\r\n            return getBarbers.json();\r\n        })\r\n        .then(getBarbers => {\r\n            this.setState({\r\n                barbers: getBarbers\r\n            })\r\n        })\r\n        .catch(err => {\r\n            alert(\"Failed to load our Barbers\" + err)\r\n        });\r\n\r\n        // GET SERVICES\r\n\r\n        fetch(baseUrl + '/services')\r\n        .then(getServices => {\r\n            return getServices.json();\r\n        })\r\n        .then(getServices => {\r\n            this.setState({\r\n                services: getServices\r\n            })\r\n        })\r\n        .catch(err => {\r\n            alert(\"Failed to load our Services\" + err)\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        const { barbers, services, price } = this.state;\r\n        return (\r\n            <div className=\"booking-app-wrapper\">\r\n                <div className=\"booking-app-title\">\r\n                    <h2>Book your appointment</h2>\r\n                </div>\r\n\r\n                <form onSubmit={this.handleSubmit.bind(this)}>\r\n                    <div className=\"input-wrapper\">\r\n                        <input type=\"text\" placeholder=\"First Name\" onChange={this.handleChange.bind(this, \"name\")} value={this.state.fields[\"name\"]}/>\r\n                        <span className=\"error\">{this.state.errors[\"name\"]}</span>\r\n                    </div>\r\n\r\n                    <div className=\"input-wrapper\">\r\n                        <input type=\"text\" placeholder=\"Last Name\" onChange={this.handleChange.bind(this, \"surname\")} value={this.state.fields[\"surname\"]}/>\r\n                    </div>\r\n\r\n                    <div className=\"input-wrapper\">\r\n                        <input placeholder=\"Email\" onChange={this.handleChange.bind(this, \"email\")} value={this.state.fields[\"email\"]} />\r\n                        <span className=\"error\">{this.state.errors[\"email\"]}</span>\r\n                    </div>\r\n\r\n                    <div className=\"input-wrapper\">\r\n                        <input pattern=\"[0][0-9]{8}\" placeholder=\"Phone Number\" onChange={this.handleChange.bind(this, \"phone\")} value={this.state.fields[\"phone\"]}/>\r\n                        <span className=\"error\">{this.state.errors[\"phone\"]}</span>\r\n                    </div>\r\n\r\n                    <div className=\"input-wrapper\">\r\n                       <select value={this.state.fields[\"barber\"]} onChange={this.onChange.bind(this, \"barber\")}>\r\n                           <option hidden>Select Barber</option>\r\n                           {barbers.map(barber => (\r\n                                <option onClick={() => this.props.data.changeDuration(false)} key={barber.id}>\r\n                                {barber.firstName} {barber.lastName}\r\n                                </option>\r\n                            ))}\r\n                       </select>\r\n                       <span className=\"error\">{this.state.errors[\"barber\"]}</span>\r\n                    </div>\r\n\r\n                    <div className=\"input-wrapper\">\r\n                       <select value={this.state.fields[\"service\"]} onChange={this.handleClick.bind(this, \"service\")}>\r\n                           <option hidden>Select Service</option>\r\n                           {services.map(service => (\r\n                                <option \r\n                                    key={service.id} value={service.price}>\r\n                                    {service.name}\r\n                                </option>\r\n                            ))}\r\n                       </select>\r\n                       <span className=\"error\">{this.state.errors[\"service\"]}</span>\r\n                    </div>\r\n\r\n                    <TimePicker field={this.state.fields} getWorkingHours={this.state.getWorkingHours} disabled={this.state.isDisabled} />\r\n\r\n                    <div className=\"input-wrapper price\">\r\n                        <input value={price === 'Service Price' ? price : 'Price is ' + price + '$'} disabled/>\r\n                    </div>\r\n                    \r\n                    <input type=\"submit\" value=\"Book appointment\" />\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BookAppointment\r\n"]},"metadata":{},"sourceType":"module"}